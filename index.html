<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive NFT</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Archivo:wdth,wght@62..125,500&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Doppio+One&display=swap" rel="stylesheet">
  <style>
/* -------------------<< Basic Fill Class >>-----------------------------*/
:root {
  --theme-color: #000000;
  --text-color: #ffffff;
  --gray1-color: #464d5a;
  --gray2-color:#BDC3C7;
  --gray3-color:#7f7f7f;
  --circle-color:#BDC3C7;
  --select-color:rgba(255, 255, 255, 0.5);
}
/* -----------------------------------------------------------*/
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: var(--theme-color);
      cursor: none;
      /* Hide the default mouse cursor */
    }

/* ----------------------color indicator----------------------------*/
   #backg {
    position: relative;
     display: flex;
     width: 100vmin;
     height: 100vmin;
     justify-content: center; 
     align-items: center;
    }

    #lowerbox {
     position: absolute;
     display: flex; 
     justify-content: center;
     align-items: center;
     overflow: hidden;
     width : 97%;  
     height: 97%; 
     border-radius: 5%;

    }

   #upperbox {
     position: absolute;
     width: 95.3%;
     height: 95.3%;
     border-radius: 4.5%;
    }

   #backg , #upperbox , #lowerbox  {
    background-color: var(--theme-color);
  }
   
   #color-indicator {
     position: absolute;
     width : 145%;  
     height: 145%; 
     border-radius: 50%; 
     background-image: conic-gradient(var(--dynamic-color, #00ff6e00) 10deg, #ff000000 120deg ,#ff000000 179deg,var(--dynamic-color, #00ff6e00) 180deg,#ff000000 320deg );
     animation: rotateXX 4s linear infinite;
     will-change: transform;
    }
   
    @keyframes rotateXX {
     0% {transform: rotate(0deg);}
     100% {transform: rotate(-1turn);}
   }

/* --------------------------------------------------------------------*/
    

      #svg-frame {
      position: absolute;
      width: 100%;
      height: 100%;
    }


    #work-space {
     position: absolute;
     display: grid;
     background-color: transparent ;
     width: 80%;
     height: 80%;
  
    }


    .grid-item {
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
      /* 
      border: 1px solid #ccc; 
      padding: 2px;
      */
    }

    .grid-item svg {
      width: 100%;
      height: 100%;
      /*
      transition: transform 0.6s ease, fill 0.3s ease;
      */
    }

    /*

      .frameboxsvg {
      position: absolute;
      z-index: 0;
      opacity: 0.6;
      transition:none;
    }

    */


    /*
    .grid-item .basechainlogosvg {
      z-index: 1;
    }

    */


/* -------------------Rotation and Scaleup-----------------------------*/

@keyframes rotateInfinite {
    from {transform: rotate(var(--start-angle)) scale(1);}
    to {transform: rotate(calc(var(--start-angle) + 360deg)) scale(1);}}

.rotate-infinite {animation: rotateInfinite 2.5s linear infinite;}


    /*

@keyframes rotateScaleUp {
0% {transform: rotate(var(--start-angle)) scale(0);opacity: 0;}
100% {transform: rotate(calc(var(--start-angle) + 1*360deg)) scale(1);opacity: 1;}}

.scale-up {animation: rotateScaleUp 1.5s linear; will-change: transform, opacity;}

@keyframes scaleUpOpacityMerged {
0% {transform: scale(0);opacity: 0;}
100% {transform: scale(1);opacity: 1;}}

.scale-up-merged {animation: scaleUpOpacityMerged 1.5s ease forwards;will-change: transform, opacity;}

    */
    


.basechainlogosvg:hover {animation-play-state: paused;}

.lowsize ,.bigsize ,.merged-class {--stroke-color: rgb(253, 249, 0); }
.lowsize:hover {path {stroke: var(--stroke-color);stroke-width: 3 ;fill : none ;}}
.bigsize:hover {path {stroke:  var(--stroke-color);stroke-width: 1.5 ;fill : none ;}}
.merged-class:hover {path {stroke:  var(--stroke-color);stroke-width: 2.5;fill : none ;}}

/*-----------------------------------------------------------------------------*/

#options-button {
 opacity: 1;
 transform-box: fill-box;
 transform-origin: center;
 fill:var(--gray3-color);
 }



   /*option Button Rotation*/
   @keyframes rotateClockwise {
   from {transform: rotate(0deg);}
   to {transform: rotate(360deg);}
   }

   @keyframes rotateCounterClockwise {
   from {transform: rotate(360deg);}
   to {transform: rotate(0deg);}
   }

   .options-content.active {
   opacity: 1;
   }

   #work-space.active {
    position: absolute;
    width: 40%; 
    height: 40%;
    top: 5%;

   }

/* -------------------<< Mouse-Pointer >>-----------------------------*/

.circle-pointer {
 position: fixed;
 width: 1.85vw; 
 height: 1.85vw; 
 border-radius: 50%;
 pointer-events: none;
 mix-blend-mode: difference;
 transform: translate(-50%, -50%);
 z-index: 9999;
 background-color: rgba(255, 255, 255, 0.8);
 left: -100vw; 
 top: -100vh; 
}

/* -------------------option menu css-----------------------------*/

.options-content{
  position:absolute;
  display: grid;
  grid-template-columns: 1fr 1.35fr;
  margin-top:35%;
  height: 42%;
  width: 60%;
  align-items: center;
  opacity: 0;
}

.rect-divider{
  position:absolute;
  margin-top:35%;
  height: 42%;
  width: 60%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  pointer-events: none;
  opacity: 0;
}
.rect-divider.active {opacity: 1;}

.divider{
  height: 0.75%;
  width: 96.5%;
  border-radius: 1em;
  background-color: var(--gray1-color);
  transition: background-color 0.3s ease;
}

.divider-1 , .divider-6{
  background-color: transparent;
}

.options{
  display:flex;
  align-items: center;
  background-color: transparent;
  height: 100%;
  padding-left: 2.5%;
  padding-right: 2.5%;
}

.title{
  font-family: "Archivo", sans-serif;
  font-weight: 500;
  font-style: normal;
  color: var(--text-color);
  font-size: 3.8vmin;
}

.dropdown{
  justify-content: center;
  font-family: "Doppio One", sans-serif;
  font-weight: 400;
  font-style: normal;
  font-size: 2.5vmin;
}

/*Style of Menu*/
.select {
     background: var(--gray1-color);
     color: var(--gray2-color);
     display:flex;
     flex: 1;
     height: 4.5vmin;
     justify-content: space-between;
     align-items: center;
     border:0.060em var(--gray2-color) solid;
     border-radius: 0.15em;
     padding: 0;
     transition: background 0.3s;
}

.selected {
  margin-left: 3%;
}

.select-clicked {
     border: 0.06em var(--gray2-color) solid;
     box-shadow: 0 0 0.5em var(--gray2-color);
}

.select:hover {
     background: var(--theme-color);

}

.caret{
     width: 0;
     height: 0;
     border-left: 1vmin solid transparent;
     border-right: 1vmin solid transparent;
     border-top: 1vmin solid var(--gray2-color);
     margin-right: 1vmin;
     transition: 0.3s;
}

.caret-rotate {
    transform: rotate(180deg); 
} 

.menu{
     list-style: none;
     padding: 0.1em 0.14em; /* اصلاح padding */
     background:var(--gray1-color);
     border:0.125em var(--gray2-color) solid;
     border-radius: 0.25em;
     color:var(--gray2-color);
     position: absolute;
     left:50%;
     width:55%;
     transform: translateX(-11%);
     display: none;
     transition: 0.2s;
}

.colorpallete-menu{
  top:2em;
  z-index: 2;
  padding-bottom: 5%;
  overflow-y: auto;
  max-height: 13.87em;
}

.gridsize-menu{
  top:5.4em;z-index: 1;
  padding-bottom: 5%;
}

.menu li {
     padding: 0em 0.5em;
     margin:0.3em 0;
     border-radius: 0.2em;

}

.menu li:hover {
background: var(--theme-color);
}

.menu li.active {
     background: var(--select-color);
     color:var(--text-color);
}

.menu-open{
     display: block;
     opacity: 1;
}

.dropdown * {
box-sizing: border-box;
}


button{
  display: flex;
  position: relative;
  align-items: center;
  justify-content: center;
  width: 11vmin;
  height: 4.5vmin;
  background-color: var(--gray1-color);
  border: none;
  border-radius: 5%;
  transition: background-color 0.3s ease;
}

button:hover {
  background-color: var(--gray2-color);
}



button svg{
  position:absolute;
  height: 80%;
  fill: var(--theme-color);
  stroke: none;
  transition: fill 0.3s ease;
}

.slider-theme svg{
  height: 4.5vmin;
}

.sun-icon{
  fill: #BDC3C7;
  opacity: 0;
  transition: opacity 0.3s;
}

.moon-icon{
  fill: #464d5a;
  opacity: 0;
  transition: opacity 0.3s;
}

.moon-icon.active , .sun-icon.active {
  opacity: 1;
}

.Slider-area{
  fill:var(--gray1-color);
  transition: fill 0.3s ease;
}
.circle-group {
  transition: transform 0.3s ease; /* انیمیشن برای حرکت */
}

#circle-slider{
  fill: var(--circle-color);
  transition: fill 0.3s ease;
}


.color-boxes {
  display: flex;
  gap: 0.2em;
  justify-content: start;
}

.color-square {
  width: 1em;
  height: 1em;
  margin: 0.75% 0%;
  

  border-radius: 0.2em;
  transition: background-color 0.3s ease;
}

.selected-color-boxes {
  display: flex;
  gap: 0.3em;
  margin-left: 3%;
}

.selected-color-boxes .color-square {
  width: 1em;
  height: 1em;
  border-radius: 0.2em;
}

/* --------------------------------------------------------------------*/

/* --------------------------------------------------------------------*/
/* --------------------------------------------------------------------*/
/* --------------------------------------------------------------------*/
/* --------------------------------------------------------------------*/
  </style>
</head>
<body>
  <div id="backg">
    <div id="lowerbox">
      <div id="color-indicator"></div>
    </div>
    <div id="upperbox"></div>

    <svg id="svg-frame" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1080 1080" >
        <g id="options-group">
  
          <polygon id="options-button" points="506.33 1040.68 498.11 1032.45 540.62 989.94 581.89 1031.21 573.67 1039.43 540.62 1006.39 506.33 1040.68 506.33 1040.68"/>
          <rect id="click-box" x="440" y="975" width="200" height="98" fill="red" opacity="0" />
  
        </g>
  
    </svg>
    <div class="options-content">
      <div class="options text-colorpallete title">Color Pallete:</div>
      <div class="options menu-colorpallete dropdown">
        <div class="select">
          <div class="selected-color-boxes"></div>
          <div class="caret"></div>
        </div>
        <ul class="menu colorpallete-menu">
         <li class="li-palette">
          <div class="color-boxes p-num-0">
            <div class="color-square" style="background-color: #4285f4"></div>
            <div class="color-square" style="background-color: #34a853"></div>
            <div class="color-square" style="background-color: #fabb05"></div>
            <div class="color-square" style="background-color: #eb4335"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-1">
            <div class="color-square" style="background-color: #ffd000"></div>
            <div class="color-square" style="background-color: #da4939"></div>
            <div class="color-square" style="background-color: #f39601"></div>
            <div class="color-square" style="background-color: #ffaf97"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-2">
            <div class="color-square" style="background-color: #6cb362"></div>
            <div class="color-square" style="background-color: #BDE5B8"></div>
            <div class="color-square" style="background-color: #FFE58F"></div>
            <div class="color-square" style="background-color: #FFC107"></div>
            <div class="color-square" style="background-color: #FF6347"></div>
            <div class="color-square" style="background-color: #FFA07A"></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-3">
            <div class="color-square" style="background-color: #2457ff"></div>
            <div class="color-square" style="background-color: #00a2ff;"></div>
            <div class="color-square" style="background-color: #ac2eff;"></div>
            <div class="color-square" style="background-color: #e58fff;"></div>
            <div class="color-square" style="background-color: #ffdb11;"></div>
            <div class="color-square" style="background-color: #fff09d;"></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-4">
            <div class="color-square" style="background-color: #6E6E6E"></div>
            <div class="color-square" style="background-color: #A8A8A8"></div>
            <div class="color-square" style="background-color: #E0E0E0"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-5">
            <div class="color-square" style="background-color: #F4D03F;"></div>
            <div class="color-square" style="background-color: #28B463;"></div>
            <div class="color-square" style="background-color: #1F618D;"></div>
            <div class="color-square" style="background-color: #AF7AC5;"></div>
            <div class="color-square" style="background-color: #F0B27A;"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-6">
            <div class="color-square" style="background-color: #FF69B4"></div>
            <div class="color-square" style="background-color: #FFD700"></div>
            <div class="color-square" style="background-color: #9370DB"></div>
            <div class="color-square" style="background-color: #87CEEB"></div>
            <div class="color-square" style="background-color: #98FB98"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-7">
            <div class="color-square" style="background-color: #515cad"></div>
            <div class="color-square" style="background-color: #f4cf0d"></div>
            <div class="color-square" style="background-color: #d90707"></div>
            <div class="color-square" style="background-color: #4e9fbc"></div>
            <div class="color-square" style="background-color: #dabd8f"></div>
            <div class="color-square" style="background-color: #b38069"></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-8">
            <div class="color-square" style="background-color: #b38069"></div>
            <div class="color-square" style="background-color: #f4cd5d"></div>
            <div class="color-square" style="background-color: #497c78"></div>
            <div class="color-square" style="background-color: #3c5a7a"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-9">
            <div class="color-square" style="background-color: #ea6975"></div>
            <div class="color-square" style="background-color: #506188"></div>
            <div class="color-square" style="background-color: #6ca396"></div>
            <div class="color-square" style="background-color: #c7c9a5"></div>
            <div class="color-square" style="background-color: #dec4b8"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-10">
            <div class="color-square" style="background-color: #adf5f6"></div>
            <div class="color-square" style="background-color: #93c0ff"></div>
            <div class="color-square" style="background-color: #927aff"></div>
            <div class="color-square" style="background-color: #dda3f2"></div>
            <div class="color-square" style="background-color: #f9beed"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-11">
            <div class="color-square" style="background-color: #d7b8a4"></div>
            <div class="color-square" style="background-color: #39817d"></div>
            <div class="color-square" style="background-color: #de596a"></div>
            <div class="color-square" style="background-color: #dda280"></div>
            <div class="color-square" style="background-color: #95c2bf"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-12">
            <div class="color-square" style="background-color: #593c98"></div>
            <div class="color-square" style="background-color: #48ab5c"></div>
            <div class="color-square" style="background-color: #fab465"></div>
            <div class="color-square" style="background-color: #8d77b5"></div>
            <div class="color-square" style="background-color: #97c99f"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-13">
            <div class="color-square" style="background-color: #e5c2aa"></div>
            <div class="color-square" style="background-color: #e0a894"></div>
            <div class="color-square" style="background-color: #c87568"></div>
            <div class="color-square" style="background-color: #c18c5d"></div>
            <div class="color-square" style="background-color: #475564"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-14">
            <div class="color-square" style="background-color: #173f5f"></div>
            <div class="color-square" style="background-color: #20639b"></div>
            <div class="color-square" style="background-color: #3caea3"></div>
            <div class="color-square" style="background-color: #f6d55c"></div>
            <div class="color-square" style="background-color: #b18d00"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-15">
            <div class="color-square" style="background-color: #FF0000"></div>
            <div class="color-square" style="background-color: #FFE600"></div>
            <div class="color-square" style="background-color: #00E505"></div>
            <div class="color-square" style="background-color: #FF00E1"></div>
            <div class="color-square" style="background-color: #0052FF"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-16">
            <div class="color-square" style="background-color: #70602c"></div>
            <div class="color-square" style="background-color: #d8ac29"></div>
            <div class="color-square" style="background-color: #794515"></div>
            <div class="color-square" style="background-color: #777a2d"></div>
            <div class="color-square" style="background-color: #f1dd6d"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
         <li class="li-palette">
          <div class="color-boxes p-num-17">
            <div class="color-square" style="background-color: #5cd79e"></div>
            <div class="color-square" style="background-color: #ff5b3f"></div>
            <div class="color-square" style="background-color: #ffd46e"></div>
            <div class="color-square" style="background-color: #078796"></div>
            <div class="color-square" style="background-color: #545454"></div>
            <div class="color-square" ></div>
            <div class="color-square" ></div>
          </div>
         </li>
        </ul>
      </div>
      <div class="options text-gridsize title">Grid Size:</div>
      <div class="options menu-gridsize dropdown">
        <div class="select">
          <span class="selected">Grid Size</span>
          <div class="caret"></div>
        </div>
        <ul class="menu gridsize-menu">
          <li class="li-row-5">5x5</li>
          <li class="li-row-7">7x7</li>
          <li class="li-row-10">10x10</li>
        </ul>
      </div>
      <div class="options text-reset title">Reset:</div>
      <div class="options button-reset" style="justify-content: center;">
        <button class="reset-button">
  
          <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.8 12.5" >
            <path d="M4.2,12.5c-1.1,0-2.1-1-2.1-2.1V4.2H0L3.6,0l3.6,4.2H5.2v5.4h5.7l2.6,3H4.2z"/>
            <path d="M17.1,12.5l-3.6-4.2h2.1V2.9H10L7.3,0h9.3c1.2,0,2.1,1,2.1,2.1v6.2h2.1L17.1,12.5z"/>
          </svg>
            
        </button>
      </div>
      <div class="options text-shuffle title">Shuffle:</div>
      <div class="options button-shuffle" style="justify-content: center;">
        <button class="shuffle-button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.2 13.4" >
            <path d="M13.2,4.1c-0.4,0-0.7,0.1-1,0.4l-2.2,2.2l2.2,2.2c0.3,0.3,0.6,0.4,1,0.4h2V7.6l5,2.9l-5,2.9v-1.6h-2
              c-1,0-2-0.4-2.7-1.1L8.3,8.5L6,10.8C5.2,11.6,4.2,12,3.2,12H1.3C0.6,12,0,11.4,0,10.7c0-0.4,0.1-0.7,0.4-0.9
              c0.2-0.2,0.5-0.4,0.9-0.4h1.9c0.4,0,0.7-0.1,1-0.4l2.4-2.4L4.2,4.3c-0.3-0.3-0.6-0.4-1-0.4H1.3c-0.3,0-0.7-0.1-0.9-0.4
              C0.1,3.3,0,3,0,2.7C0,2,0.6,1.4,1.3,1.4h1.9c1,0,2,0.4,2.7,1.1l2.4,2.4l2.2-2.2c0.7-0.7,1.7-1.1,2.7-1.1h2V0l5,2.9l-5,2.9V4.1H13.2z
              "/>
          </svg>
        </button>
      </div>
      <div class="options text-theme title">Theme:</div>
      <div class="options slider-theme" style="justify-content: center;">
       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23.4 9.4">
            <path class="Slider-area"  d="M18.7,9.4h-14C2.1,9.4,0,7.3,0,4.7v0C0,2.1,2.1,0,4.7,0h14c2.6,0,4.7,2.1,4.7,4.7v0
            C23.4,7.3,21.3,9.4,18.7,9.4z"/>
         <g class="circle-group">
                <circle id="circle-slider"   cx="4.7" cy="4.7" r="3.9"/>
              <g class="sun-icon" >
                 <circle  cx="4.7" cy="4.7" r="1.7"/>
                 <path  d="M4.7,2.4L4.7,2.4c-0.2,0-0.3-0.1-0.3-0.3V1.8c0-0.2,0.1-0.3,0.3-0.3h0C4.8,1.5,5,1.6,5,1.8v0.3
                   C5,2.3,4.8,2.4,4.7,2.4z"/>
                 <path  d="M3.1,3.1L3.1,3.1C3,3.2,2.8,3.2,2.7,3.1L2.4,2.9c-0.1-0.1-0.1-0.3,0-0.4l0,0c0.1-0.1,0.3-0.1,0.4,0
                   l0.2,0.2C3.2,2.8,3.2,3,3.1,3.1z"/>
                 <path  d="M2.4,4.7L2.4,4.7C2.4,4.8,2.3,5,2.1,5H1.8C1.6,5,1.5,4.8,1.5,4.7v0c0-0.2,0.1-0.3,0.3-0.3h0.3
                   C2.3,4.4,2.4,4.5,2.4,4.7z"/>
                 <path  d="M3.1,6.3L3.1,6.3c0.1,0.1,0.1,0.3,0,0.4L2.9,6.9c-0.1,0.1-0.3,0.1-0.4,0l0,0c-0.1-0.1-0.1-0.3,0-0.4
                   l0.2-0.2C2.8,6.1,3,6.1,3.1,6.3z"/>
                 <path  d="M4.7,6.9L4.7,6.9C4.8,6.9,5,7.1,5,7.2v0.3c0,0.2-0.1,0.3-0.3,0.3h0c-0.2,0-0.3-0.1-0.3-0.3V7.2
                   C4.4,7.1,4.5,6.9,4.7,6.9z"/>
                 <path  d="M6.3,6.3L6.3,6.3c0.1-0.1,0.3-0.1,0.4,0l0.2,0.2C7,6.6,7,6.8,6.9,6.9l0,0c-0.1,0.1-0.3,0.1-0.4,0L6.3,6.7
                   C6.1,6.6,6.1,6.4,6.3,6.3z"/>
                 <path  d="M6.9,4.7L6.9,4.7c0-0.2,0.1-0.3,0.3-0.3h0.3c0.2,0,0.3,0.1,0.3,0.3v0C7.9,4.8,7.7,5,7.5,5H7.2
                   C7.1,5,6.9,4.8,6.9,4.7z"/>
                 <path  d="M6.3,3.1L6.3,3.1C6.1,3,6.1,2.8,6.3,2.7l0.2-0.2c0.1-0.1,0.3-0.1,0.4,0l0,0C7,2.5,7,2.7,6.9,2.9L6.7,3.1
                   C6.6,3.2,6.4,3.2,6.3,3.1z"/>
              </g>
       
             <path class="moon-icon" d="M5.5,6C4.2,6,3.2,5,3.2,3.7c0-1,0.6-1.8,1.4-2.1c-1.7,0-3,1.4-3,3.1c0,1.7,1.4,3.1,3.1,3.1
             c1.7,0,3.1-1.4,3.1-3.1c0-0.1,0-0.3,0-0.4C7.5,5.3,6.6,6,5.5,6z"/>
          </g>
             <path id="Sliderbox" style="opacity: 0 ; fill:red;" d="M18.7,9.4h-14C2.1,9.4,0,7.3,0,4.7v0C0,2.1,2.1,0,4.7,0h14c2.6,0,4.7,2.1,4.7,4.7v0
             C23.4,7.3,21.3,9.4,18.7,9.4z"/>
        </svg>
    
      </div>
    </div>
    <div class="rect-divider">
      <div class="divider divider-1"></div>
      <div class="divider divider-2"></div>
      <div class="divider divider-3"></div>
      <div class="divider divider-4"></div>
      <div class="divider divider-5"></div>
      <div class="divider divider-6"></div>
    </div>




    <div id="work-space" class="grid-container"></div>
    <div class="circle-pointer"></div>
  </div>




  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script>

   ////p0=google
   //const p0=['#4285f4','#34a853','#fabb05','#eb4335'];
   ////p1=Autumn Vibes
   //const p1=['#ffd000','#da4939','#f39601','#ffaf97'];
   ////bluemove
   //const p2=['#015587','#7bc4f3','#0285d6'];
   ////p3=Spring Breeze
   //const p3=['#6cb362','#BDE5B8','#FFE58F','#FFC107','#FF6347','#FFA07A'];
   ////p4
   //const p4=['#2457ff','#00a2ff','#ac2eff','#e58fff','#ffdb11','#fff09d'];
   ////p5=grayscale
   //const p5=['#6E6E6E','#A8A8A8','#E0E0E0'];
   ////rainbow
   //const p6=['#FF0000', '#FFE600', '#00E505','#FF00E1', '#0052FF'];
   //const p7=['#A8E6CF','#DCEDC1','#FFD3B6','#FFAAA5','#FF8B94'];
   //const p8=['#7FFF00','#32CD32','#98FB98','#00FA9A'];
   //const p9=['#F4D03F','#28B463','#1F618D','#AF7AC5','#F0B27A'];
   //const p10=['#FF5733','#C70039','#900C3F','#581845','#FFC300'];
   //const p11=['#FF69B4','#FFD700','#9370DB','#87CEEB','#98FB98'];
   //const p12=['#F39C12','#9B59B6','#b6ff6d'];
   //const p13=['#87CEFA','#FFB6C1','#c5fa8f'];
   //const p14=['#515cad','#f4cf0d','#d90707','#4e9fbc','#dabd8f','#b38069'];
   //const p15=['#b38069','#f4cd5d','#497c78','#3c5a7a'];
   //const p16=['#c4a188','#8ec2ca','#e4d081','#96d3b5','#e09aa1'];
   //const p17=['#ea6975','#506188','#6ca396','#c7c9a5','#dec4b8'];
   //const p18=['#adf5f6','#93c0ff','#927aff','#dda3f2','#f9beed'];
   //const p19=['#008100','#205527','#ff2b01','#a31f05'];
   //const p20=['#d7b8a4','#39817d','#de596a','#dda280','#95c2bf'];
   //const p21=['#7939e9','#9e0059','#ff0054','#febd01'];
   //const p22=['#593c98','#48ab5c','#fab465','#8d77b5','#97c99f'];
   //const p23=['#e5c2aa','#e0a894','#c87568','#c18c5d','#475564'];
   //const p24=['#173f5f','#20639b','#3caea3','#f6d55c','#b18d00'];
   //const p25=['#f89fe2','#7e92e9','#87e9a9','#f5e285'];
   //const p26=['#70602c','#d8ac29','#794515','#777a2d','#f1dd6d'];
   //const p27=['#5cd79e','#ff5b3f','#ffd46e','#078796','#545454'];
   //const p28=['#fe0000','#0000fe','#00cd00'];

    
    
    //Favorite-----> #0!-#1!-#3!-#4!-#5!-#9!-#11!-13 ----
    //#14!-#15!-#17!-##18!-#20!-#22!-#23!-#24!-#6!-#26!-#27!


const p0=['#4285f4','#34a853','#fabb05','#eb4335'];
const p1=['#ffd000','#da4939','#f39601','#ffaf97'];
const p2=['#6cb362','#BDE5B8','#FFE58F','#FFC107','#FF6347','#FFA07A'];
const p3=['#2457ff','#00a2ff','#ac2eff','#e58fff','#ffdb11','#fff09d'];
const p4=['#6E6E6E','#A8A8A8','#E0E0E0'];
const p5=['#F4D03F','#28B463','#1F618D','#AF7AC5','#F0B27A'];
const p6=['#FF69B4','#FFD700','#9370DB','#87CEEB','#98FB98'];
const p7=['#515cad','#f4cf0d','#d90707','#4e9fbc','#dabd8f','#b38069'];
const p8=['#b38069','#f4cd5d','#497c78','#3c5a7a'];
const p9=['#ea6975','#506188','#6ca396','#c7c9a5','#dec4b8'];
const p10=['#adf5f6','#93c0ff','#927aff','#dda3f2','#f9beed'];
const p11=['#d7b8a4','#39817d','#de596a','#dda280','#95c2bf'];
const p12=['#593c98','#48ab5c','#fab465','#8d77b5','#97c99f'];
const p13=['#e5c2aa','#e0a894','#c87568','#c18c5d','#475564'];
const p14=['#173f5f','#20639b','#3caea3','#f6d55c','#b18d00'];
const p15=['#FF0000', '#FFE600', '#00E505','#FF00E1', '#0052FF'];
const p16=['#70602c','#d8ac29','#794515','#777a2d','#f1dd6d'];
const p17=['#5cd79e','#ff5b3f','#ffd46e','#078796','#545454'];


const palettes = [p0, p1, p2, p3, p4, p5, p6, p7, p8, p9, p10, p11, p12, p13,p14,p15,p16,p17];

    const randomIndex = Math.floor(Math.random() * 14);
    window.palette1 = palettes[randomIndex];


    //window.palette1 = palettes[3];


   const gridContainer = document.querySelector('.grid-container');
    let currentColorIndex = 0;
    window.frameboxsvgVisible = false;
    window.themeiswhite = false;

    if (themeiswhite){
      window.defaulttheme =true;
    }
    else {
      window.defaulttheme =false;
    }

    window.gridData=[];

    let DEV_TYPE = null;
    let capsLockActive = false;
    
    GridGenerator(10,gridData,'animated'); 

    

//---------------------------------------------------------------------
//------------------JS for option content------------------------------

const dropdowns = document.querySelectorAll('.dropdown');
  dropdowns.forEach(dropdown => {
       const select = dropdown.querySelector('.select');
       const caret = dropdown.querySelector('.caret');
       const menu = dropdown.querySelector('.menu');
       const options = dropdown.querySelectorAll('.menu li'); // اصلاح شده
       const selected = dropdown.querySelector('.selected');

//default active palette
const paletteLi= document.querySelectorAll ('.li-palette');
paletteLi.forEach (group => {

const colorbox = group.querySelector('.color-boxes');

if (colorbox.classList.contains(`p-num-${randomIndex}`)) {

  group.classList.add('active');

}
});
//--------------------------------------------------------
//set the active pallet to the select pallet menu
   window.addEventListener('DOMContentLoaded', () => {

   const activePalette = document.querySelector('.colorpallete-menu li.active');

   if (activePalette) {

      const colorSquares = activePalette.querySelectorAll('.color-square');

      // انتخاب بخش selected-color-boxes
      const selectedColorBoxes = document.querySelector('.select .selected-color-boxes');
      selectedColorBoxes.innerHTML = ''; 

      colorSquares.forEach(square => {
         const newSquare = document.createElement('div');
         newSquare.classList.add('color-square');
         newSquare.style.backgroundColor = square.style.backgroundColor;
         selectedColorBoxes.appendChild(newSquare);
      });
   }
});

//--------------------------------------------------------
//color Palette Menu recoloring algorithm
function RandomRecolor(palette) {
    return palette[Math.floor(Math.random() * palette.length)];
}
//------------------------------------------------------

//--------------------------------------------------------
       select.addEventListener('click',() =>{
            select.classList.toggle('select-clicked'); // اصلاح شده
            caret.classList.toggle('caret-rotate');
            menu.classList.toggle('menu-open');
       });

       options.forEach(option => {
       option.addEventListener('click', () => {
      // چک کردن نوع منو
      if (menu.classList.contains('colorpallete-menu')) {
         // عملکرد برای منوی پالت رنگی

         // گرفتن رنگ‌های پالت انتخابی
         const colorSquares = option.querySelectorAll('.color-square');

         // پاک کردن محتویات قبلی داخل selected-color-boxes
         const selectedColorBoxes = select.querySelector('.selected-color-boxes');
         selectedColorBoxes.innerHTML = ''; // حذف محتوای قبلی

         // افزودن مربع‌های رنگی پالت انتخابی به بخش selected-color-boxes
         colorSquares.forEach(square => {
            const newSquare = document.createElement('div');
            newSquare.classList.add('color-square');
            newSquare.style.backgroundColor = square.style.backgroundColor;
            selectedColorBoxes.appendChild(newSquare);
         });
      } else {
         // عملکرد برای منوی Grid Size یا منوهای دیگر

         // جایگزینی متن انتخاب شده
         selected.innerText = option.innerText;
      }

      // بستن منو و سایر تغییرات
      select.classList.remove('select-clicked');
      caret.classList.remove('caret-rotate');
      menu.classList.remove('menu-open');

      // تنظیم گزینه فعال
      options.forEach(opt => opt.classList.remove('active'));
      
      option.classList.add('active');

//--------------------------------------------------------------
//find the correspounding active pallet id
if (option.classList.contains('li-palette')){
      const colorbox=option.querySelector('.color-boxes');
      const classList = colorbox.classList;
      const pNumClass = Array.from(classList).find(cls => cls.startsWith('p-num-'));
      if (pNumClass) {
        const i = pNumClass.match(/\d+/)[0];
        palette1 = palettes[i];

      }
      //gridData recolor by palette1.....................................
      gridData.forEach(item => {
      
      item.color = RandomRecolor(palette1);
      
      });
      
      console.log('resetgird2',resetgrid);
      GridGenerator(calculateSize(gridData),gridData,'');

 };


//---------------------------------------------------------------
      if (option.classList.contains('li-row-5')) {
        
        GridGenerator(5,[],'animated'); 
      }
      else if(option.classList.contains('li-row-7')){
        
        GridGenerator(7,[],'animated'); 
      }
      else if(option.classList.contains('li-row-10')){

        GridGenerator(10,[],'animated'); 
      }

//for color pallete menu
if (option.classList.contains('p-num-0')) {

        GridGenerator(5,[],'animated'); 
      }



   });
});

  });
//-----------------------------------------------
//-----------------------------theme----------------------------------
const circlegroup = document.querySelector('.circle-group');
const sliderbox= document.getElementById('Sliderbox');
const moonicon = document.querySelector('.moon-icon');
const sunicon=document.querySelector('.sun-icon');

sliderbox.addEventListener('click',(event) => {
  toggleColor();
});

if (themeiswhite) {
toggleColor();
}


function toggleColor() {
  const allthemebase = document.querySelectorAll('.themebaselogo');

  if (themeiswhite) {
    circlegroup.style.transform = 'translate(0, 0)';
    moonicon.classList.add('active');
    sunicon.classList.remove('active');
    document.documentElement.style.setProperty('--text-color', '#ffffff');
    document.documentElement.style.setProperty('--theme-color', '#000000');
    document.documentElement.style.setProperty('--gray1-color', '#464d5a');
    document.documentElement.style.setProperty('--gray2-color', '#BDC3C7');
    document.documentElement.style.setProperty('--circle-color', '#BDC3C7');
    document.documentElement.style.setProperty('--select-color', 'rgba(0, 0, 0, 0.3)');
   allthemebase.forEach(themebase => {
   themebase.setAttribute('fill', '#000000');
   });
  }
  else {
    circlegroup.style.transform = 'translate(14px, 0)';  
    moonicon.classList.remove('active');
    sunicon.classList.add('active');
    document.documentElement.style.setProperty('--theme-color', '#ffffff');
    document.documentElement.style.setProperty('--text-color', '#000000');
    document.documentElement.style.setProperty('--gray1-color', '#BDC3C7');
    document.documentElement.style.setProperty('--gray2-color', '#464d5a');
    document.documentElement.style.setProperty('--circle-color', '#FFFFFF');
    document.documentElement.style.setProperty('--select-color', 'rgba(255, 255, 255, 0.5)');
   allthemebase.forEach(themebase => {
   themebase.setAttribute('fill', '#ffffff');
   });
  }

  themeiswhite=!themeiswhite;
};

document.addEventListener('keydown', (e) => {
  if (e.code === 'KeyF') { 
    toggleColor();
  }
});




//--------------------------random color picker------------------------
function randomColorPicker(colorPalette) {
  return colorPalette[Math.floor(Math.random() * colorPalette.length)];
}
//--------------------------------------------------------------------
//---------------------------gridData size calculator------------------
function calculateSize(gridData) {
    // تعریف متغیرها
    let s = 0; // تعداد حالت‌های square2x2
    let t = 0; // تعداد حالت‌های 1x3-vertical و 3x1-horizontal
    let d = 0; // تعداد حالت‌های 2x1-horizontal و 1x2-vertical
    let u = 0; // تعداد حالت‌های unmerged

    // پیمایش آرایه gridData
    gridData.forEach(item => {
        switch (item.type) {
            case "square2x2":
                s++;
                break;
            case "1x3-vertical":
            case "3x1-horizontal":
                t++;
                break;
            case "2x1-horizontal":
            case "1x2-vertical":
                d++;
                break;
            case "unmerged":
                u++;
                break;
        }
    });

    // محاسبه size با استفاده از فرمول داده شده
    let totalgrids = 4 * s + 3 * t + 2 * d + u;
    let gridDataSize = Math.sqrt(totalgrids);
    // خروجی size
    return gridDataSize;
}
//-----------------------------Grid-generator--------------------------

//function; Generate Grid
function GridGenerator(size, GridData = [], Mode = '') {

    // پاک کردن شبکه قبلی
    while (gridContainer.firstChild) {
        gridContainer.removeChild(gridContainer.firstChild);
    }

    // تنظیم ابعاد شبکه
    if (gridContainer) {
        gridContainer.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
        gridContainer.style.gridTemplateRows = `repeat(${size}, 1fr)`;
        
    }

    if (GridData.length > 0) {
    // از روی GridData شبکه را می‌سازیم
    GridData.forEach(item => {
        const { type, coordinates, color, display, gridArea } = item;

        if (type === "unmerged") {
            // برای شبکه‌های مرج نشده
            const gridItem = document.createElement('div');
            gridItem.classList.add('grid-item', 'unmerged');
            gridItem.style.gridArea = gridArea;
            gridItem.style.display = display;

            // اضافه کردن SVG برای شبکه مرج نشده
            const svgContent =  `
                    <svg class="basechainlogosvg lowsize" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"  >
                        <path d="M95.9,50c0,25.4-20.6,46-46,46C25.8,96,6.1,77.5,4.1,53.9h60.7v-7.7H4.1C6.1,22.5,25.8,4,49.9,4
	                      C75.3,4,95.9,24.6,95.9,50z" fill="${color}" />
                    </svg>`;

            gridItem.innerHTML = svgContent;

            gridContainer.appendChild(gridItem);
           //merged Grid
       } else {
            // برای شبکه‌های مرج شده
            const mergedDiv = document.createElement('div');
            mergedDiv.classList.add('grid-item', 'merged-grid', type);
            mergedDiv.style.gridArea = gridArea;
            mergedDiv.style.display = display;

            // اضافه کردن SVG مناسب برای نوع مرج
            let svgContent = '';
            switch (type) {
                case 'square2x2':
                svgContent = `
            <svg class="basechainlogosvg bigsize" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
              <path d="M98.9,50c0,27.1-21.9,49-49,49C24.2,99,3.2,79.3,1.1,54.1h64.7v-8.2H1.1C3.2,20.7,24.2,1,49.9,1
	            C77,1,98.9,22.9,98.9,50z" fill="${color}" />
            </svg>`;

                    break;
                case '3x1-horizontal':
                    svgContent = `
                    <svg version="1.1" id="triple-logo" class="merged-class" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                    viewBox="0 0 300 100" style="enable-background:new 0 0 300 100;" xml:space="preserve">
                    <path id="rect-frame" class="basecontainer" fill="${color}" d="M4,50L4,50C4,24.6,24.6,4,50,4h200c25.4,0,46,20.6,46,46v0c0,25.4-20.6,46-46,46H50C24.6,96,4,75.4,4,50z"/>
                    <path id="baselogo1" class="themebaselogo" fill="#000000" d="M189.2,50c0,21.7-17.6,39.2-39.3,39.2
                    c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6h-51.9c1.7-20.1,18.6-35.9,39.2-35.9C171.6,10.8,189.2,28.3,189.2,50z"/>
                    <path id="baselogo2" class="themebaselogo" fill="#000000" d="M89.2,50c0,21.7-17.6,39.2-39.3,39.2
                    c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6H10.8c1.7-20.1,18.6-35.9,39.2-35.9C71.6,10.8,89.2,28.3,89.2,50z"/>
                    <path id="baselogo3" class="themebaselogo" fill="#000000"  d="M289.2,50c0,21.7-17.6,39.2-39.3,39.2
                    c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6h-51.9c1.7-20.1,18.6-35.9,39.2-35.9C271.6,10.8,289.2,28.3,289.2,50z"/>
                    </svg>`;
                    break;
                case '1x3-vertical':
                    svgContent = `
                    <svg version="1.1" id="triple-logo" class="merged-class" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                    viewBox="0 0 100 300" style="enable-background:new 0 0 100 300;" xml:space="preserve">
               <path id="rect-frame" class="basecontainer" d="M50,4L50,4c25.4,0,46,20.6,46,46v200c0,25.4-20.6,46-46,46h0c-25.4,0-46-20.6-46-46V50C4,24.6,24.6,4,50,4z" fill="${color}"/> 
               <path id="baselogo1" class="themebaselogo" d="M50,189.2c-21.7,0-39.2-17.6-39.2-39.3
		           c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6v-51.9c20.1,1.7,35.9,18.6,35.9,39.2C89.2,171.6,71.7,189.2,50,189.2z" fill="#000000"/>
               <path id="baselogo2" class="themebaselogo" d="M50,89.2c-21.7,0-39.2-17.6-39.2-39.3
		           c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6V10.8c20.1,1.7,35.9,18.6,35.9,39.2C89.2,71.6,71.7,89.2,50,89.2z" fill="#000000"/>
               <path id="baselogo3" class="themebaselogo" d="M50,289.2c-21.7,0-39.2-17.6-39.2-39.3
	             c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6v-51.9c20.1,1.7,35.9,18.6,35.9,39.2C89.2,271.6,71.7,289.2,50,289.2z" fill="#000000"/>
                    </svg>`;
                    break;
                case '2x1-horizontal':
                    svgContent = `
                    <svg version="1.1" class="merged-class" viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg">
                        <path id="rect-frame" class="basecontainer" d="M4,50L4,50C4,24.6,24.6,4,50,4h100c25.4,0,46,20.6,46,46v0c0,25.4-20.6,46-46,46H50C24.6,96,4,75.4,4,50z" fill="${color}"/>
                        <path id="baselogo1" class="themebaselogo" d="M187.2,50c0,21.7-17.6,39.2-39.3,39.2
		                    c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6h-51.9c1.7-20.1,18.6-35.9,39.2-35.9C169.6,10.8,187.2,28.3,187.2,50z" fill="#000000"/>
                        <path id="baselogo2" class="themebaselogo" d="M91.2,50c0,21.7-17.6,39.2-39.3,39.2
	                      c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6H12.8c1.7-20.1,18.6-35.9,39.2-35.9C73.6,10.8,91.2,28.3,91.2,50z" fill="#000000"/>
                    </svg>`;
                    break;
                case '1x2-vertical':
                    svgContent = `
                    <svg version="1.1" class="merged-class" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
                        <path id="rect-frame" class="basecontainer" d="M50,4L50,4c25.4,0,46,20.6,46,46v100c0,25.4-20.6,46-46,46h0c-25.4,0-46-20.6-46-46V50C4,24.6,24.6,4,50,4z" fill="${color}"/>
                        <path id="baselogo1" class="themebaselogo" d="M50,187.2c-21.7,0-39.2-17.6-39.2-39.3
	                     	c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6v-51.9c20.1,1.7,35.9,18.6,35.9,39.2C89.2,169.6,71.7,187.2,50,187.2z" fill="#000000"/>
                        <path id="baselogo2" class="themebaselogo" d="M50,91.2c-21.7,0-39.2-17.6-39.2-39.3
		                    c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6V12.8c20.1,1.7,35.9,18.6,35.9,39.2C89.2,73.6,71.7,91.2,50,91.2z" fill="#000000"/>
                    </svg>`;
                    break;
            }

            mergedDiv.innerHTML = svgContent;
            gridContainer.appendChild(mergedDiv);
        }
    });


//GridData is null - Random Generator

} else {

    // ایجاد المان‌های شبکه اولیه
    let grid = Array.from({ length: size }, () => Array(size).fill(0));
    gridData = [];

    for (let i = 0; i < size * size; i++) {
        const gridItem = document.createElement('div');
        gridItem.classList.add('grid-item', `g-${i}`,'unmerged');
        const row = Math.floor(i / size) + 1; // ردیف
        const column = (i % size) + 1; // ستون
        gridItem.style.gridArea = `${row} / ${column} / ${row + 1} / ${column + 1}`;
        gridContainer.appendChild(gridItem);
    }


    // تولید تعداد مرج‌ها به صورت تصادفی
    let s, t, d;
    let sum, total;

    do {
        // تعیین تعداد مرج‌ها به صورت تصادفی
        s = Math.floor(Math.random() * 9) + 1; // تعداد square2x2
        t = Math.floor(Math.random() * 9) + 1; // تعداد rect3x1 یا rect1x3
        d = Math.floor(Math.random() * 9) + 1; // تعداد rect2x1 یا rect1x2

        // محاسبه مجموع مساحت مرج‌ها و اندازه کل شبکه
        sum = 4 * s + 3 * t + 2 * d;
        total = size * size;
    } while (sum / total < 0.5 || sum / total > 1);



    // تابع کمکی برای چک کردن معتبر بودن مرج
    function isValidMerge(cells) {
        return cells.every(([r, c]) => r < size && c < size && grid[r][c] === 0);
    }

    // اعمال مرج به شبکه‌ها
    function applyMerge(cells, mergeType) {

        cells.forEach(([r, c]) => {
            grid[r][c] = 1;
            const gridItem = document.querySelector(`.g-${r * size + c}`);
            if (gridItem) gridItem.style.display = 'none';
        });

        const mergedDiv = document.createElement('div');
        mergedDiv.classList.add('grid-item', 'merged-grid');
        const [startRow, startCol] = cells[0];
        const [endRow, endCol] = cells[cells.length - 1];
        mergedDiv.style.gridArea = `${startRow + 1} / ${startCol + 1} / ${endRow + 2} / ${endCol + 2}`;

        const fillColor = randomColorPicker(palette1);

        gridData.push({
                type: mergeType,
                coordinates: cells,
                color: fillColor,
                display: 'block', // یا 'none' بسته به وضعیت نمایش
                gridArea: `${startRow + 1} / ${startCol + 1} / ${endRow + 2} / ${endCol + 2}`
            });

        let svgContent = '';

        switch (mergeType) {

        case 'square2x2':
            svgContent = `
            <svg class="basechainlogosvg bigsize" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"  >
              <path d="M98.9,50c0,27.1-21.9,49-49,49C24.2,99,3.2,79.3,1.1,54.1h64.7v-8.2H1.1C3.2,20.7,24.2,1,49.9,1
             	C77,1,98.9,22.9,98.9,50z" fill="${fillColor}" />
            </svg>`;
            break;
        case '3x1-horizontal':
            svgContent = `
            <svg version="1.1" id="triple-logo" class="merged-class" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
            viewBox="0 0 300 100" style="enable-background:new 0 0 300 100;" xml:space="preserve">

                    <path id="rect-frame" class="basecontainer" fill="${fillColor}" d="M4,50L4,50C4,24.6,24.6,4,50,4h200c25.4,0,46,20.6,46,46v0c0,25.4-20.6,46-46,46H50C24.6,96,4,75.4,4,50z"/>
                    <path id="baselogo1" class="themebaselogo" fill="#000000" d="M189.2,50c0,21.7-17.6,39.2-39.3,39.2
                    c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6h-51.9c1.7-20.1,18.6-35.9,39.2-35.9C171.6,10.8,189.2,28.3,189.2,50z"/>
                    <path id="baselogo2" class="themebaselogo" fill="#000000" d="M89.2,50c0,21.7-17.6,39.2-39.3,39.2
                    c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6H10.8c1.7-20.1,18.6-35.9,39.2-35.9C71.6,10.8,89.2,28.3,89.2,50z"/>
                    <path id="baselogo3" class="themebaselogo" fill="#000000"  d="M289.2,50c0,21.7-17.6,39.2-39.3,39.2
                    c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6h-51.9c1.7-20.1,18.6-35.9,39.2-35.9C271.6,10.8,289.2,28.3,289.2,50z"/>



               </svg>`;
            break;
        case '1x3-vertical':

            svgContent = `
               <svg version="1.1" id="triple-logo" class="merged-class" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
               viewBox="0 0 100 300" style="enable-background:new 0 0 100 300;" xml:space="preserve">

               <path id="rect-frame" class="basecontainer" d="M50,4L50,4c25.4,0,46,20.6,46,46v200c0,25.4-20.6,46-46,46h0c-25.4,0-46-20.6-46-46V50C4,24.6,24.6,4,50,4z" fill="${fillColor}"/> 
               <path id="baselogo1" class="themebaselogo" d="M50,189.2c-21.7,0-39.2-17.6-39.2-39.3
		           c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6v-51.9c20.1,1.7,35.9,18.6,35.9,39.2C89.2,171.6,71.7,189.2,50,189.2z" fill="#000000"/>
               <path id="baselogo2" class="themebaselogo" d="M50,89.2c-21.7,0-39.2-17.6-39.2-39.3
		           c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6V10.8c20.1,1.7,35.9,18.6,35.9,39.2C89.2,71.6,71.7,89.2,50,89.2z" fill="#000000"/>
               <path id="baselogo3" class="themebaselogo" d="M50,289.2c-21.7,0-39.2-17.6-39.2-39.3
	             c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6v-51.9c20.1,1.7,35.9,18.6,35.9,39.2C89.2,271.6,71.7,289.2,50,289.2z" fill="#000000"/>

               </svg>`;
            break;
        case '2x1-horizontal':
            svgContent =`
               <svg version="1.1" class="merged-class" viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg">
                        <path id="rect-frame" class="basecontainer" d="M4,50L4,50C4,24.6,24.6,4,50,4h100c25.4,0,46,20.6,46,46v0c0,25.4-20.6,46-46,46H50C24.6,96,4,75.4,4,50z" fill="${fillColor}"/>
                        <path id="baselogo1" class="themebaselogo" d="M187.2,50c0,21.7-17.6,39.2-39.3,39.2
		                    c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6h-51.9c1.7-20.1,18.6-35.9,39.2-35.9C169.6,10.8,187.2,28.3,187.2,50z" fill="#000000"/>
                        <path id="baselogo2" class="themebaselogo" d="M91.2,50c0,21.7-17.6,39.2-39.3,39.2
	                      c-20.6,0-37.5-15.8-39.2-35.9h51.9v-6.6H12.8c1.7-20.1,18.6-35.9,39.2-35.9C73.6,10.8,91.2,28.3,91.2,50z" fill="#000000"/>
               </svg>`;
            break;
        case '1x2-vertical':
            svgContent =`
                <svg version="1.1" class="merged-class" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
                        <path id="rect-frame" class="basecontainer" d="M50,4L50,4c25.4,0,46,20.6,46,46v100c0,25.4-20.6,46-46,46h0c-25.4,0-46-20.6-46-46V50C4,24.6,24.6,4,50,4z" fill="${fillColor}"/>
                        <path id="baselogo1" class="themebaselogo" d="M50,187.2c-21.7,0-39.2-17.6-39.2-39.3
	                     	c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6v-51.9c20.1,1.7,35.9,18.6,35.9,39.2C89.2,169.6,71.7,187.2,50,187.2z" fill="#000000"/>
                        <path id="baselogo2" class="themebaselogo" d="M50,91.2c-21.7,0-39.2-17.6-39.2-39.3
		                    c0-20.6,15.8-37.5,35.9-39.2v51.9h6.6V12.8c20.1,1.7,35.9,18.6,35.9,39.2C89.2,73.6,71.7,91.2,50,91.2z" fill="#000000"/>
                </svg>`;
            break;
    }
        mergedDiv.innerHTML = svgContent;
        gridContainer.appendChild(mergedDiv);
        return gridData;
    }


    // تابع برای شافل کردن آرایه
    // Fisher-Yates shuffle algorithm
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // ساخت لیست موقعیت‌های ممکن برای مرج 2x2
    let possibleSquare2x2 = [];
    for (let row = 0; row < size - 1; row++) {
        for (let col = 0; col < size - 1; col++) {
            possibleSquare2x2.push([[row, col], [row, col + 1], [row + 1, col], [row + 1, col + 1]]);
        }
    }
    shuffleArray(possibleSquare2x2);


    // ساخت لیست موقعیت‌های ممکن برای مرج 3x1 و 1x3
    let possibleRect3x1 = [], possibleRect1x3 = [];
    for (let row = 0; row < size; row++) {
        for (let col = 0; col < size - 2; col++) {
            possibleRect1x3.push([[row, col], [row, col + 1], [row, col + 2]]);
        }
    }
    for (let row = 0; row < size - 2; row++) {
        for (let col = 0; col < size; col++) {
            possibleRect3x1.push([[row, col], [row + 1, col], [row + 2, col]]);
        }
    }
    shuffleArray(possibleRect1x3);
    shuffleArray(possibleRect3x1);

    // ساخت لیست موقعیت‌های ممکن برای مرج 2x1 و 1x2
    let possibleRect2x1 = [], possibleRect1x2 = [];
    for (let row = 0; row < size; row++) {
        for (let col = 0; col < size - 1; col++) {
            possibleRect1x2.push([[row, col], [row, col + 1]]);
        }
    }
    for (let row = 0; row < size - 1; row++) {
        for (let col = 0; col < size; col++) {
            possibleRect2x1.push([[row, col], [row + 1, col]]);
        }
    }
    shuffleArray(possibleRect1x2);
    shuffleArray(possibleRect2x1);

    // ساخت مرج‌های 2x2
    let square2x2Count = 0;
    while (square2x2Count < s && possibleSquare2x2.length > 0) {
        const cells = possibleSquare2x2.pop();
        if (cells && isValidMerge(cells)) {
            applyMerge(cells, 'square2x2');
            square2x2Count++;

        }
    }

    // ساخت مرج‌های 3x1 یا 1x3
    let rect3x1Or1x3Count = 0;
    while (rect3x1Or1x3Count < t && (possibleRect1x3.length > 0 || possibleRect3x1.length > 0)) {
        const isHorizontal = Math.random() > 0.5;
        const cells = (isHorizontal ? possibleRect1x3 : possibleRect3x1).pop();
        if (cells && isValidMerge(cells)) {
          applyMerge(cells, isHorizontal ? '3x1-horizontal' : '1x3-vertical');
            rect3x1Or1x3Count++;
        }
    }

    // ساخت مرج‌های 2x1 یا 1x2
    let rect2x1Or1x2Count = 0;
    while (rect2x1Or1x2Count < d && (possibleRect1x2.length > 0 || possibleRect2x1.length > 0)) {
        const isHorizontal = Math.random() > 0.5;
        const cells = (isHorizontal ? possibleRect1x2 : possibleRect2x1).pop();
        if (cells && isValidMerge(cells)) {
            applyMerge(cells, isHorizontal ? '2x1-horizontal' : '1x2-vertical');
            rect2x1Or1x2Count++;
        }
    }

    // اضافه کردن SVG به شبکه‌های غیرمرج‌شده
    function addUnmergedSVGs() {
    const gridItems = document.querySelectorAll('.unmerged');

    const hiddenGridItems = document.querySelectorAll('.grid-item[style*="display: none"]');


    // حذف این div ها
    hiddenGridItems.forEach(gridItem => {
        gridItem.remove();
    });


    gridItems.forEach(gridItem => {
        if (gridItem.style.display !== 'none') {
            const fillColor = randomColorPicker(palette1);
            const gridArea = window.getComputedStyle(gridItem).gridArea;
            const [rowStart, colStart, rowEnd, colEnd] = gridArea.split(' / ').map(val => parseInt(val, 10));

                // ثبت اطلاعات در GridData
                gridData.push({
                    type: 'unmerged', // نوع مرج نشده
                    coordinates: [[rowStart, colStart]], // مختصات خانه
                    color: fillColor, // رنگ تولید شده
                    display: 'block', // وضعیت نمایش
                    gridArea: gridArea
                });

                // اضافه کردن SVG به هر gridItem
                const svgContent = `
                    <svg class="basechainlogosvg lowsize" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"  >
                        <path d="M95.9,50c0,25.4-20.6,46-46,46C25.8,96,6.1,77.5,4.1,53.9h60.7v-7.7H4.1C6.1,22.5,25.8,4,49.9,4
	                      C75.3,4,95.9,24.6,95.9,50z" fill="${fillColor}" />
                    </svg>`;
                gridItem.innerHTML += svgContent;
            
        }
    });
}

            // فراخوانی تابع برای اضافه کردن SVG به شبکه‌های غیرمرج‌شده
            addUnmergedSVGs();    
}

const svgs = document.querySelectorAll('.basechainlogosvg');

    svgs.forEach(svg => {

        const randomAngle = Math.floor(Math.random() * 360);
        svg.style.transform = `rotate(${randomAngle}deg)`;
        svg.style.setProperty('--start-angle', `${randomAngle}deg`);
        svg.classList.add('rotate-infinite');



//       if (Mode === 'animated') {
//          svg.classList.add('scale-up');
//          svg.addEventListener('animationend', () => {
//             svg.classList.remove('scale-up'); 
//         });
//     }

 
    });

//if (Mode === 'animated') {
//const mergedItems = document.querySelectorAll('.merged-class');
//
//mergedItems.forEach(item => {
//    // اضافه کردن کلاس انیمیشن scale-up و opacity
//    item.classList.add('scale-up-merged');
//
//    // بعد از اتمام انیمیشن، کلاس حذف شود
//    item.addEventListener('animationend', () => {
//        item.classList.remove('scale-up-merged');
//    });
//});
//
//}

if (themeiswhite){
  const allthemebase = document.querySelectorAll('.themebaselogo');
  allthemebase.forEach(themebase => {
   themebase.setAttribute('fill', '#ffffff');
   });
}

}



window.resetgrid = JSON.parse(JSON.stringify(gridData));

console.log('resetgird1',resetgrid);
//---------------------------------------------------------------------
//----default select size menu== current size------------------------

const sizenumber = calculateSize(gridData);

if (sizenumber==5){ 

  const currentsize=document.querySelector('.li-row-5');
  currentsize.classList.add('active');

}
else if (sizenumber==7){

  const currentsize=document.querySelector('.li-row-7');
  currentsize.classList.add('active');

}
else if (sizenumber==10){
  const currentsize=document.querySelector('.li-row-10');
  currentsize.classList.add('active');

}

const activeGridSize = document.querySelector('.gridsize-menu li.active');
const selectedGridSize = document.querySelector('.menu-gridsize .selected');

if (activeGridSize && selectedGridSize) {
        selectedGridSize.innerText = activeGridSize.innerText;
}

//-----------------------------gridData color Updater------------------
function UpdateGridDataColor(GridData) {
    GridData.forEach(item => {
        const { type, gridArea } = item;

        let newColor = '';

        // پیدا کردن عنصر بر اساس gridArea
        // فرض می‌کنیم gridArea به صورت "row-start / col-start / row-end / col-end" است
        const gridItem = Array.from(document.querySelectorAll('.grid-item')).find(el => el.style.gridArea === gridArea);

        if (!gridItem) {
            console.error(`Grid item with gridArea ${gridArea} not found.`);
            return;
        }

        // برای موارد 'square2x2' یا 'unmerged'
        if (type === 'square2x2' || type === 'unmerged') {
            const svg = gridItem.querySelector('.basechainlogosvg');
            if (svg) {
                const path = svg.querySelector('path');
                if (path) {
                    newColor = path.getAttribute('fill'); // خواندن رنگ فعلی از path
                }
            }
        }
        // برای موارد '3x1-horizontal', '1x3-vertical', '2x1-horizontal', '1x2-vertical'
        else if (
            type === '3x1-horizontal' ||
            type === '1x3-vertical' ||
            type === '2x1-horizontal' ||
            type === '1x2-vertical'
        ) {
            const svg = gridItem.querySelector('.basecontainer');
            if (svg) {
                newColor = svg.getAttribute('fill'); // خواندن رنگ فعلی از basecontainer
            }
        }

        // به‌روزرسانی رنگ در GridData
        if (newColor) {
            item.color = newColor;
        }
    });
}

//-----------------------<< Dynamic Stroke color Function >>---------------
function updateStrokeColor(newColor) {
    // تغییر مقدار متغیر در کلاس های مختلف
    document.querySelectorAll('.lowsize, .bigsize, .merged-class').forEach(el => {
        el.style.setProperty('--stroke-color', newColor);
    });
}
//-----------------------<< Dynamic indicator gradient color >>---------------
function setGradientColor(newColor) {
  // تغییر مقدار متغیر CSS
  document.documentElement.style.setProperty('--dynamic-color', newColor);
}

//-----------------------------Device checker--------------------------
//function; determineDeviceType
function determineDeviceType() {
   // Check device type using CSS Media Queries
   const mediaQueryResult = window.matchMedia("(max-width: 768px)").matches;
  
   // Check device type using Window Dimensions
   const windowDimensionResult = window.innerWidth <= 768;

   // Determine device type based on both checks
   const isMobile = mediaQueryResult && windowDimensionResult;
   const isDesktop = !mediaQueryResult && !windowDimensionResult;

   // Set DEV_TYPE and capsLockActive based on device type
   DEV_TYPE = isMobile ? 1 : 0;
   capsLockActive = DEV_TYPE === 1;
}
// Run the function to determine device type
determineDeviceType();

//---------------------------------------------------------
//Capslock Listener
document.addEventListener('keydown', (e) => {
      if (e.code === 'CapsLock') {
        capsLockActive = !capsLockActive;
      }
    });
//---------------------------------------------------------------------
//-----------------------------coloring+Rotation-----------------------
updateStrokeColor(palette1[currentColorIndex]);
setGradientColor(palette1[currentColorIndex]);
//PC Mode1(default)

gridContainer.addEventListener('mouseenter', (event) => {
  const gridItem = event.target.closest('.grid-item');
  if (gridItem && !capsLockActive) {
    // Color for basechainlogosvg
    const svgElement = gridItem.querySelector('.basechainlogosvg');
    if (svgElement) {
      svgElement.querySelector('path').setAttribute('fill', palette1[currentColorIndex]);
    }
    
    // Color for basecontainer
    const baseContainer = gridItem.querySelector('.basecontainer');
    if (baseContainer) {
      baseContainer.setAttribute('fill', palette1[currentColorIndex]);  

    }

  }
}, true);

// Click event for PC Mode1
document.addEventListener('click', (event) => {
  if (!capsLockActive) {
    currentColorIndex = (currentColorIndex + 1) % palette1.length;
    updateStrokeColor(palette1[currentColorIndex]);
    setGradientColor(palette1[currentColorIndex]);

    // Handle hover change for basechainlogosvg
    const hoveredElement = document.querySelector('.grid-item:hover .basechainlogosvg');
    if (hoveredElement) {
      hoveredElement.querySelector('path').setAttribute('fill', palette1[currentColorIndex]);
    }

    // Handle hover change for basecontainer
    const hoveredContainer = document.querySelector('.grid-item:hover .basecontainer');
    if (hoveredContainer) {
      hoveredContainer.setAttribute('fill', palette1[currentColorIndex]);
    }

  }
});


// PC Mode2 (mobile default) - CAPS TRIGGERED
gridContainer.addEventListener('click', (event) => {
  const gridItem = event.target.closest('.grid-item');
  if (gridItem) {
    const svgElement = gridItem.querySelector('.basechainlogosvg');
    const baseContainer = gridItem.querySelector('.basecontainer');

    // رنگ فعلی و شاخص رنگ فعلی را از رنگ‌های موجود بگیرید
    const currentColor = palette1[currentColorIndex];

    if (svgElement) {
      const currentFillSvg = svgElement.querySelector('path').getAttribute('fill');


      // شرط بررسی رنگ برای basechainlogosvg
      if (capsLockActive && currentFillSvg === currentColor) {
        currentColorIndex = (currentColorIndex + 1) % palette1.length;
        updateStrokeColor(palette1[currentColorIndex]);
        setGradientColor(palette1[currentColorIndex]);
      }

      // بروز‌رسانی رنگ basechainlogosvg
      svgElement.querySelector('path').setAttribute('fill', palette1[currentColorIndex]);

    }

    if (baseContainer) {
      const currentFillBase = baseContainer.getAttribute('fill');  // رنگ فعلی basecontainer را بگیرید

      // شرط بررسی رنگ برای basecontainer
      if (capsLockActive && currentFillBase === currentColor) {
        currentColorIndex = (currentColorIndex + 1) % palette1.length;
        updateStrokeColor(palette1[currentColorIndex]);
        setGradientColor(palette1[currentColorIndex]);
      }

      // بروز‌رسانی رنگ basecontainer
      baseContainer.setAttribute('fill', palette1[currentColorIndex]);

    }

    setGradientColor(palette1[currentColorIndex]);
  }
});

//Mobile touch-drag (auto color)                    
function handleTouchMove(event) {
  const touchX = event.touches[0].clientX;
  const touchY = event.touches[0].clientY;
  const elements = document.elementsFromPoint(touchX, touchY);

  elements.forEach((element) => {
    // Handle basechainlogosvg
    if (element.classList.contains('basechainlogosvg')) {
      const gridItem = element.closest('.grid-item');
      const svgElement = gridItem.querySelector('.basechainlogosvg');
      if (svgElement) {
        // Update the fill color of the path in basechainlogosvg
        svgElement.querySelector('path').setAttribute('fill', palette1[currentColorIndex]);

      }
    }

    // Handle basecontainer
    if (element.classList.contains('basecontainer')) {
      const gridItem = element.closest('.grid-item');
      const svgElement = gridItem.querySelector('.basecontainer'); // Since element is already basecontainer

      // Directly set the fill attribute on basecontainer if it's a fillable element
      svgElement.setAttribute('fill', palette1[currentColorIndex]);
    }
  });
}
if (DEV_TYPE === 1) {
  gridContainer.addEventListener('touchmove', handleTouchMove);
}

//---------------------------------------------------------------------
//-----------------------------pointer----------------------------------

document.addEventListener('mousemove', (event) => {
    const cursor = document.querySelector('.circle-pointer');
    const x = event.clientX;
    const y = event.clientY;
    cursor.style.left = `${x}px`;
    cursor.style.top = `${y}px`;

    // Use computed style to get background color
    const elementUnderCursor = document.elementFromPoint(x, y);
    const bgColor = window.getComputedStyle(elementUnderCursor).backgroundColor;

    // Calculate the inverse color
    const [r, g, b] = bgColor.match(/\d+/g).map(Number);
    const inverseColor = `rgb(${255 - r}, ${255 - g}, ${255 - b})`;
    cursor.style.backgroundColor = inverseColor;
});

        
        document.addEventListener('contextmenu', (event) => {
      event.preventDefault(); //desable rightclick
    });

    //disable middle mouse
    document.addEventListener('mousedown', (event) => {
      if (event.button === 1) { 
        event.preventDefault(); 
      }
    });

//---------------------------------------------------------------------
//----------------------------Option Button Trigger-----------------------------
//mouse in
   document.getElementById('click-box').addEventListener('mouseover', function() {
   const optionButton = document.getElementById('options-button');
   if (themeiswhite){
   document.documentElement.style.setProperty('--gray3-color', '#000000');
   }
   else {
   document.documentElement.style.setProperty('--gray3-color', '#FFFFFF');
   }
   });
//mouse out
   document.getElementById('click-box').addEventListener('mouseout', function() {
   const optionButton = document.getElementById('options-button');
   document.documentElement.style.setProperty('--gray3-color', '#7f7f7f');


   });

//click
   document.getElementById('click-box').addEventListener('click', function() {
    const workspace = document.getElementById('work-space');
    const svgFrame = document.getElementById('svg-frame');
    const optionButton = document.getElementById('options-button');
    const optionscontent = document.querySelector('.options-content');
    const rectdivider=document.querySelector('.rect-divider');
  
    if (!svgFrame.classList.contains('active')) {  
      optionButton.style.transition = "transform 0.3s ease";
      optionButton.style.transform = "rotate(180deg)";
      svgFrame.classList.add('active');
      workspace.classList.add('active');
      optionscontent.classList.add('active');
      rectdivider.classList.add('active');
     } 
     else {
      optionButton.style.transition = "transform 0.3s ease";
      optionButton.style.transform = "rotate(0deg)";
      svgFrame.classList.remove('active');
      workspace.classList.remove('active');
      optionscontent.classList.remove('active');
      rectdivider.classList.remove('active');
     }
     });
//--------------------------------------------------------------------------
//---------------------------Grid indicator------------------------
//Default Grid indicator   
//  let lastClicked = document.getElementById("rec55");
//  lastClicked.style.fill = "white";
//  
//  const zones = [
//  { clickId: "click1", recId: "rec11", size: 1 },
//  { clickId: "click3", recId: "rec33", size: 3 },
//  { clickId: "click5", recId: "rec55", size: 5 }, //default Grid
//  { clickId: "click7", recId: "rec77", size: 7 }, 
//  { clickId: "click9", recId: "rec99", size: 9 },
//  { clickId: "click24", recId: "rec2424", size: 24 }
//  ];
//
//  zones.forEach(zone => {
//      const clickElement = document.getElementById(zone.clickId);
//      const recElement = document.getElementById(zone.recId);
//
//mouse in and out color change
//      clickElement.addEventListener("mouseover", () => {
//          if (lastClicked !== recElement) {
//              recElement.style.fill = "#001FFF";
//          }
//      });
//
//      clickElement.addEventListener("mouseout", () => {
//          if (lastClicked !== recElement) {
//              recElement.style.fill = "black";
//          }
//      });
//click to set grid indicator
//      clickElement.addEventListener("click", () => {
//          if (lastClicked) {
//              lastClicked.style.fill = "black";
//          }
//
//          recElement.style.fill = "white";
//          lastClicked = recElement;
//          GridGenerator(zone.size, [],'animated');
//
//      });
//  });
//---------------------------------------------------------------------
//-----------------------------screenshot-----------------------------
function screenshot() {

    //Temporary Stop .rotate Style
//    let rotatingElements = document.querySelectorAll('.rotate');
//    rotatingElements.forEach(el => {
//        const computedStyle = window.getComputedStyle(el);
//        if (computedStyle.animationPlayState !== 'paused') {
//            el.style.animationPlayState = 'paused';
//        }
//    });
//    
//    setTimeout(() => {
//        let gridElement = document.getElementById('svg-frame');
//        //screenshot 
//        html2canvas(gridElement).then(function(canvas) {
//
//            //Screenshot to PNG
//            let link = document.createElement('a');
//            link.href = canvas.toDataURL('image/png');
//            link.download = 'grid_screenshot.png';
//            link.click();
//
//            //Start Rotation Again
//            rotatingElements.forEach(el => {
//                el.style.animationPlayState = 'running';
//            });
//        });
//    }, 50); //Time Pause 50m Seconds
}

//KEY R Listener 
document.addEventListener("keydown", function(event) {
    if (event.code === "KeyR") {
        screenshot();
    }
});
 
//---------------------------------------------------------------------
//-----------------------------Export data-----------------------------
function Exportdata(GridData) {
    // تبدیل داده‌ها به رشته JSON
    const dataStr = JSON.stringify(GridData);

    // ساخت یک عنصر Blob برای ایجاد فایل متنی
    const blob = new Blob([dataStr], { type: 'text/plain' });

    // ساخت URL از Blob برای دانلود فایل
    const url = URL.createObjectURL(blob);

    // ساخت لینک دانلود
    const link = document.createElement('a');
    link.href = url;
    link.download = 'gridData.txt';  // نام فایل
    link.click();  // شبیه‌سازی کلیک برای دانلود

    // آزاد کردن URL ساخته شده
    URL.revokeObjectURL(url);
}
  

//KEY E listner
document.addEventListener("keydown", function(event) {
    if (event.code === "KeyE") {
UpdateGridDataColor(gridData);
Exportdata(gridData);
    }
});
//---------------------------------------------------------------------
//-----------------------------shuffle pattern-------------------------
//KEY O Listener ; shuffle pattern
document.addEventListener("contextmenu", function(event) {
    GridGenerator(calculateSize(gridData),[],'');
    }
);

const shufflebutton = document.querySelector('.shuffle-button');
shufflebutton.addEventListener('click', function() {
  GridGenerator(calculateSize(gridData),[],'');

});

//---------------------------------------------------------------------
//---------------------------------reset button---------------------
//reset button

const resetbutton = document.querySelector('.reset-button');
resetbutton.addEventListener('click', function() {

  

  GridGenerator(calculateSize(resetgrid),resetgrid,'');
  gridData = JSON.parse(JSON.stringify(resetgrid));

  const gridsizemenu = document.querySelectorAll('.gridsize-menu li');

  gridsizemenu.forEach(opt => opt.classList.remove('active'));
  const sizenumber = calculateSize(resetgrid);

if (sizenumber==5){ 

  const currentsize=document.querySelector('.li-row-5');
  currentsize.classList.add('active');

}
else if (sizenumber==7){

  const currentsize=document.querySelector('.li-row-7');
  currentsize.classList.add('active');

}
else if (sizenumber==10){
  const currentsize=document.querySelector('.li-row-10');
  currentsize.classList.add('active');

}

const activeGridSize = document.querySelector('.gridsize-menu li.active');
const selectedGridSize = document.querySelector('.menu-gridsize .selected');

if (activeGridSize && selectedGridSize) {
        selectedGridSize.innerText = activeGridSize.innerText;
}

if (defaulttheme !== themeiswhite) {
  toggleColor();
}


});

//----------------------------------------------------
//update color-indicator
setGradientColor(palette1[currentColorIndex]);
//---------------------------------------------------
//JS for option menu



//---------------------------------------------------
  </script>
</body>
</html>
